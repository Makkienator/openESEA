{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\multiple\\MultipleAuditAudit.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\multiple\\MultipleAuditAudit.vue","mtime":1707572265489},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1741014595374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgQXhpb3NJbnN0YW5jZSB9IGZyb20gJ0AvcGx1Z2lucy9heGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmVyaWZpY2F0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgdmVyaWZpZWQ6IG51bGwsCiAgICAgIHNlbmRpbmdfbWFpbHM6IGZhbHNlLAogICAgICB0YWJsZXZhbHM6IFt7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgcmVzcG9uZGVudDogJ0hlbmsnLAogICAgICAgIGVtYWlsOiAnaGVua0BtYWlsLmNvbScKICAgICAgfSwgewogICAgICAgIGlkOiAyLAogICAgICAgIHJlc3BvbmRlbnQ6ICdIZW5yaWV0dGUnLAogICAgICAgIGVtYWlsOiAnaGVucmlldHRlQG1haWwuY29tJwogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgncmVzcG9uZGVudCcsIFsncmVzcG9uZGVudHMnXSksCiAgICAuLi5tYXBTdGF0ZSgnc3VydmV5QXVkaXQnLCBbJ3N1cnZleUF1ZGl0J10pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCdzdXJ2ZXlBdWRpdCcsIFsndXBkYXRlU3VydmV5QXVkaXQnXSksCiAgICBhc3luYyB2ZXJpZnlTdXJ2ZXlBdWRpdCgpIHsKICAgICAgLy8gc2F2ZSBzdXJ2ZXlfYXVkaXRfb2JqZWN0LnZlcmlmaWVkID0gdGhpcy52ZXJpZmllZAogICAgICAvLyBhc3luYy9hd2FpdAogICAgICB0aGlzLnN1cnZleUF1ZGl0LnN0YXR1cyA9IHRoaXMudmVyaWZpZWQ7CiAgICAgIGF3YWl0IHRoaXMudXBkYXRlU3VydmV5QXVkaXQoewogICAgICAgIG9JZDogdGhpcy4kcm91dGUucGFyYW1zLk9yZ2FuaXNhdGlvbklkLAogICAgICAgIGVhSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5Fc2VhQWNjb3VudElkLAogICAgICAgIGlkOiB0aGlzLnN1cnZleUF1ZGl0LmlkLAogICAgICAgIGRhdGE6IHRoaXMuc3VydmV5QXVkaXQKICAgICAgfSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnbXVsdGlwbGVhdWRpdHJlc3VsdHMnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgRXNlYUFjY291bnRJZDogdGhpcy4kcm91dGUucGFyYW1zLkVzZWFBY2NvdW50SWQsCiAgICAgICAgICBTdXJ2ZXlJZDogdGhpcy4kcm91dGUucGFyYW1zLlN1cnZleUlkCiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gaWYgdGhpcy52ZXJpZmllZCA9PT0gdHJ1ZSwgc2F2ZSBzdXJ2ZXkgdG8gZXNlYV9hY2NvdW50LnZlcmlmaWVkX3N1cnZleXMKICAgIH0sCiAgICBhc3luYyByZXNlbmRNYWlsKGRhdGEpIHsKICAgICAgdmFyIHJlc3BvbmRlbnRJZHMgPSBudWxsOwogICAgICBpZiAoZGF0YSkgewogICAgICAgIHRoaXMuc2VuZGluZ19tYWlscyA9IGRhdGEuZGF0YS5lbWFpbDsKICAgICAgICByZXNwb25kZW50SWRzID0gW2RhdGEuZGF0YS5pZF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZW5kaW5nX21haWxzID0gdHJ1ZTsKICAgICAgICByZXNwb25kZW50SWRzID0gdGhpcy5yZXNwb25kZW50cy5tYXAocmVzcG9uZGVudCA9PiByZXNwb25kZW50LmlkKTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygnLS0+JywgdGhpcy5yZXNwb25kZW50cywgcmVzcG9uZGVudElkcyk7CiAgICAgIGF3YWl0IEF4aW9zSW5zdGFuY2UucG9zdChgL2VzZWEtYWNjb3VudC8ke3RoaXMuJHJvdXRlLnBhcmFtcy5Fc2VhQWNjb3VudElkfS9zdXJ2ZXktYXVkaXQvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuU3VydmV5SWR9L3NlbmQtYXVkaXQtZW1haWxzL2AsIHsKICAgICAgICByZXNwb25kZW50czogcmVzcG9uZGVudElkcwogICAgICB9KS50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuc2VuZGluZ19tYWlscyA9IGZhbHNlOwogICAgICAgIH0sIDIwMDApOwogICAgICB9KTsKICAgIH0sCiAgICB2ZXJpZnlBdWRpdChjaG9pY2UpIHsKICAgICAgdGhpcy52ZXJpZmllZCA9IGNob2ljZTsKICAgICAgdGhpcy52ZXJpZmljYXRpb25EaWFsb2cgPSB0cnVlOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapState","mapActions","AxiosInstance","data","verificationDialog","verified","sending_mails","tablevals","id","respondent","email","computed","methods","verifySurveyAudit","surveyAudit","status","updateSurveyAudit","oId","$route","params","OrganisationId","eaId","EseaAccountId","$router","push","name","SurveyId","resendMail","respondentIds","respondents","map","console","log","post","then","response","setTimeout","verifyAudit","choice"],"sources":["C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\multiple\\MultipleAuditAudit.vue"],"sourcesContent":["<template>\r\n    <div class=\"p-mx-3\">\r\n        <div class=\"p-d-flex p-ai-center p-jc-between\">\r\n            <h2 class=\"p-text-left\">Audit</h2>\r\n            <Button @click=\"resendMail()\" label=\"Send verification mail\" class=\"p-button-sm p-button-warning\" icon=\"pi pi-envelope\" />\r\n        </div>\r\n        <DataTable :value=\"respondents\" dataKey=\"id\" selectionMode=\"single\" showGridlines autoLayout\r\n            :paginator=\"true\" :rows=\"10\" :filters=\"filters\" paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n            :rowsPerPageOptions=\"[5,10,25]\" currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" class=\"p-datatable-striped\">\r\n\r\n            <Column header=\"Respondent\" headerStyle=\"min-width: 250px;\">\r\n                <template #body=\"{data}\">\r\n                    {{ data.first_name}} {{ data.last_name_prefix }} {{ data.last_name}}\r\n                </template>\r\n            </Column>\r\n            <Column header=\"Email adress\" headerStyle=\"text-align: center\" > <!-- bodyStyle=\"text-align: center; overflow: visible\" -->\r\n                <template #body=\"data\">\r\n                        <div class=\"p-d-flex p-ai-center p-jc-between\">\r\n                            {{data.data.email}}\r\n                            <Button :icon=\"((sending_mails === data.data.email || sending_mails === true) ? 'pi pi-spin pi-spinner' : 'pi pi-replay')\" class=\"p-button-warning p-button-sm\" @click=\"resendMail(data)\" />\r\n                        </div>\r\n                </template>\r\n            </Column>\r\n        </Datatable>\r\n        <div class=\"p-d-flex p-jc-end\">\r\n            <div class=\"p-py-3\" style=\"width: 300px;\">\r\n                <Button @click=\"verifyAudit('verified')\" label=\"Verify\" icon=\"pi pi-check\" class=\"p-button-success p-button-sm p-mb-3\" style=\"width: 100%;\" />\r\n                <Button @click=\"verifyAudit('rejected')\" label=\"Reject\" icon=\"pi pi-times\" class=\"p-button-danger p-button-sm\" style=\"width: 100%;\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <Dialog v-model:visible=\"verificationDialog\" style=\"width: 500px;\" header=\"Help\" :modal=\"true\" dismissableMask=\"true\">\r\n        <p>Are you sure you wish to {{verified ? 'verify': 'reject'}} the survey responses?</p>\r\n        <template #footer>\r\n            <Button label=\"Yes\" class=\"p-button-sm\" icon=\"pi pi-check\" @click=\"verifySurveyAudit()\" />\r\n            <Button label=\"No\" class=\"p-button-sm\" icon=\"pi pi-times\" @click=\"verificationDialog = false\" />\r\n        </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\n    import { mapState, mapActions } from 'vuex'\r\n    import { AxiosInstance } from '@/plugins/axios'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                verificationDialog: false,\r\n                verified: null,\r\n                sending_mails: false,\r\n                tablevals: [\r\n                    { id: 1, respondent: 'Henk', email: 'henk@mail.com' },\r\n                    { id: 2, respondent: 'Henriette', email: 'henriette@mail.com' }\r\n                    ]\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('respondent', ['respondents']),\r\n            ...mapState('surveyAudit', ['surveyAudit'])\r\n        },\r\n        methods: {\r\n            ...mapActions('surveyAudit', ['updateSurveyAudit']),\r\n            async verifySurveyAudit () {\r\n                // save survey_audit_object.verified = this.verified\r\n                // async/await\r\n                this.surveyAudit.status = this.verified\r\n                await this.updateSurveyAudit({ oId: this.$route.params.OrganisationId, eaId: this.$route.params.EseaAccountId, id: this.surveyAudit.id, data: this.surveyAudit })\r\n                this.$router.push({ name: 'multipleauditresults', params: { EseaAccountId: this.$route.params.EseaAccountId, SurveyId: this.$route.params.SurveyId } })\r\n                // if this.verified === true, save survey to esea_account.verified_surveys\r\n            },\r\n            async resendMail (data) {\r\n                var respondentIds = null\r\n                if (data) {\r\n                    this.sending_mails = data.data.email\r\n                    respondentIds = [data.data.id]\r\n                } else {\r\n                    this.sending_mails = true\r\n                    respondentIds = this.respondents.map(respondent => respondent.id)\r\n                }\r\n                console.log('-->', this.respondents, respondentIds)\r\n                await AxiosInstance.post(`/esea-account/${this.$route.params.EseaAccountId}/survey-audit/${this.$route.params.SurveyId}/send-audit-emails/`, { respondents: respondentIds })\r\n                .then(async (response) => {\r\n                    console.log(response.data)\r\n                    setTimeout(() => { this.sending_mails = false }, 2000)\r\n                })\r\n            },\r\n            verifyAudit (choice) {\r\n                this.verified = choice\r\n                this.verificationDialog = true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"],"mappings":";;;AA0CI,SAASA,QAAQ,EAAEC,UAAS,QAAS,MAAK;AAC1C,SAASC,aAAY,QAAS,iBAAgB;AAE9C,eAAe;EACXC,IAAGA,CAAA,EAAK;IACJ,OAAO;MACHC,kBAAkB,EAAE,KAAK;MACzBC,QAAQ,EAAE,IAAI;MACdC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,CACP;QAAEC,EAAE,EAAE,CAAC;QAAEC,UAAU,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAgB,CAAC,EACrD;QAAEF,EAAE,EAAE,CAAC;QAAEC,UAAU,EAAE,WAAW;QAAEC,KAAK,EAAE;MAAqB;IAEtE;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGX,QAAQ,CAAC,YAAY,EAAE,CAAC,aAAa,CAAC,CAAC;IAC1C,GAAGA,QAAQ,CAAC,aAAa,EAAE,CAAC,aAAa,CAAC;EAC9C,CAAC;EACDY,OAAO,EAAE;IACL,GAAGX,UAAU,CAAC,aAAa,EAAE,CAAC,mBAAmB,CAAC,CAAC;IACnD,MAAMY,iBAAgBA,CAAA,EAAK;MACvB;MACA;MACA,IAAI,CAACC,WAAW,CAACC,MAAK,GAAI,IAAI,CAACV,QAAO;MACtC,MAAM,IAAI,CAACW,iBAAiB,CAAC;QAAEC,GAAG,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,cAAc;QAAEC,IAAI,EAAE,IAAI,CAACH,MAAM,CAACC,MAAM,CAACG,aAAa;QAAEd,EAAE,EAAE,IAAI,CAACM,WAAW,CAACN,EAAE;QAAEL,IAAI,EAAE,IAAI,CAACW;MAAY,CAAC;MAChK,IAAI,CAACS,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE,sBAAsB;QAAEN,MAAM,EAAE;UAAEG,aAAa,EAAE,IAAI,CAACJ,MAAM,CAACC,MAAM,CAACG,aAAa;UAAEI,QAAQ,EAAE,IAAI,CAACR,MAAM,CAACC,MAAM,CAACO;QAAS;MAAE,CAAC;MACtJ;IACJ,CAAC;IACD,MAAMC,UAASA,CAAGxB,IAAI,EAAE;MACpB,IAAIyB,aAAY,GAAI,IAAG;MACvB,IAAIzB,IAAI,EAAE;QACN,IAAI,CAACG,aAAY,GAAIH,IAAI,CAACA,IAAI,CAACO,KAAI;QACnCkB,aAAY,GAAI,CAACzB,IAAI,CAACA,IAAI,CAACK,EAAE;MACjC,OAAO;QACH,IAAI,CAACF,aAAY,GAAI,IAAG;QACxBsB,aAAY,GAAI,IAAI,CAACC,WAAW,CAACC,GAAG,CAACrB,UAAS,IAAKA,UAAU,CAACD,EAAE;MACpE;MACAuB,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE,IAAI,CAACH,WAAW,EAAED,aAAa;MAClD,MAAM1B,aAAa,CAAC+B,IAAI,CAAC,iBAAiB,IAAI,CAACf,MAAM,CAACC,MAAM,CAACG,aAAa,iBAAiB,IAAI,CAACJ,MAAM,CAACC,MAAM,CAACO,QAAQ,qBAAqB,EAAE;QAAEG,WAAW,EAAED;MAAc,CAAC,EAC1KM,IAAI,CAAC,MAAOC,QAAQ,IAAK;QACtBJ,OAAO,CAACC,GAAG,CAACG,QAAQ,CAAChC,IAAI;QACzBiC,UAAU,CAAC,MAAM;UAAE,IAAI,CAAC9B,aAAY,GAAI,KAAI;QAAE,CAAC,EAAE,IAAI;MACzD,CAAC;IACL,CAAC;IACD+B,WAAUA,CAAGC,MAAM,EAAE;MACjB,IAAI,CAACjC,QAAO,GAAIiC,MAAK;MACrB,IAAI,CAAClC,kBAAiB,GAAI,IAAG;IACjC;EACJ;AACJ","ignoreList":[]}]}