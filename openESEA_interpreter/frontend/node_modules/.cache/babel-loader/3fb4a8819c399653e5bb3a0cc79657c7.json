{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\method\\SurveyGeneral.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\method\\SurveyGeneral.vue","mtime":1707572265512},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1741014595374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IERyb3Bkb3duIGZyb20gJ3ByaW1ldnVlL2Ryb3Bkb3duJzsKaW1wb3J0IHsgUkVTUE9OU0VfVFlQRSB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbnN0YW50cyc7CmltcG9ydCB7IGlzRXF1YWwsIGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IHJlcXVpcmVkLCBtYXhMZW5ndGgsIGJldHdlZW4gfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0b3JzJzsKaW1wb3J0IEhhbmRsZVZhbGlkYXRpb25FcnJvcnMgZnJvbSAnLi4vLi4vdXRpbHMvSGFuZGxlVmFsaWRhdGlvbkVycm9ycyc7CmltcG9ydCB1c2VWdWVsaWRhdGUgZnJvbSAnQHZ1ZWxpZGF0ZS9jb3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERyb3Bkb3duCiAgfSwKICBzZXR1cDogKCkgPT4gKHsKICAgIHYkOiB1c2VWdWVsaWRhdGUoKQogIH0pLAogIHZhbGlkYXRpb25zOiB7CiAgICBsYXp5U3VydmV5OiB7CiAgICAgIG5hbWU6IHsKICAgICAgICByZXF1aXJlZCwKICAgICAgICBtYXhMZW5ndGg6IG1heExlbmd0aCgxMjApCiAgICAgIH0sCiAgICAgIG1pbl90aHJlc2hvbGQ6IHsKICAgICAgICByZXF1aXJlZCwKICAgICAgICBiZXR3ZWVuOiBiZXR3ZWVuKDAsIDEwMCkKICAgICAgfSwKICAgICAgcmVzcG9uc2VfdHlwZTogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYXp5U3VydmV5OiBjbG9uZURlZXAodGhpcy5zdXJ2ZXkpIHx8IHt9LAogICAgICByZXNwb25zZV90eXBlOiBSRVNQT05TRV9UWVBFLAogICAgICB1bnNhdmVkQ2hhbmdlc0RpYWxvZzogZmFsc2UsCiAgICAgIGRpc2NhcmRVbnNhdmVkQ2hhbmdlczogZmFsc2UsCiAgICAgIHRvOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdzdXJ2ZXknLCBbJ3N1cnZleScsICdlcnJvcnMnLCAnaXNTYXZlZCddKSwKICAgIC8vIE9ubHkgYWxsb3cgcmVzcG9uc2UgdHlwZXMgdGhhdCBhcmUgc3BlY2lmaWVkIGluIHRoZSB1dGlscy9jb25zdGFudHMgZmlsZQogICAgcmVzcG9uc2VUeXBlTGlzdCgpIHsKICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMucmVzcG9uc2VfdHlwZSkubWFwKChbdGV4dCwgdmFsdWVdKSA9PiAoewogICAgICAgIHRleHQsCiAgICAgICAgdmFsdWUKICAgICAgfSkpOwogICAgfSwKICAgIG5hbWVFcnJvcnMoKSB7CiAgICAgIHJldHVybiBIYW5kbGVWYWxpZGF0aW9uRXJyb3JzKHRoaXMudiQubGF6eVN1cnZleS5uYW1lLCB0aGlzLmVycm9ycy5uYW1lKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzdXJ2ZXkodmFsKSB7CiAgICAgIGlmIChpc0VxdWFsKHRoaXMubGF6eVN1cnZleSwgdmFsKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxhenlTdXJ2ZXkgPSBjbG9uZURlZXAodmFsKTsKICAgIH0sCiAgICBsYXp5U3VydmV5OiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy52JC4kaW52YWxpZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNFcXVhbCh0aGlzLnN1cnZleSwgdmFsKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVwZGF0ZVN1cnZleUZvcm0odmFsKTsKICAgICAgICB9LCAyMDApOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZUxlYXZlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBpZiAoKHRoaXMudiQuJGludmFsaWQgfHwgIXRoaXMuaXNTYXZlZCkgJiAhdGhpcy5kaXNjYXJkVW5zYXZlZENoYW5nZXMpIHsKICAgICAgdGhpcy51bnNhdmVkQ2hhbmdlc0RpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMudG8gPSB0bzsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQodHJ1ZSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sYXp5U3VydmV5ID0gY2xvbmVEZWVwKHRoaXMuc3VydmV5KTsKICAgIGlmICghdGhpcy5sYXp5U3VydmV5Lm5hbWUubGVuZ3RoKSB7CiAgICAgIHRoaXMuJHJlZnMuc3VydmV5bmFtZS4kZWwuZm9jdXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoJ3N1cnZleScsIFsndXBkYXRlU3VydmV5J10pLAogICAgdW5zYXZlZENoYW5nZXNDaG9pY2UoY2hvaWNlKSB7CiAgICAgIHRoaXMudW5zYXZlZENoYW5nZXNEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5kaXNjYXJkVW5zYXZlZENoYW5nZXMgPSBjaG9pY2U7CiAgICAgIGlmIChjaG9pY2UpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLnRvKTsKICAgICAgfQogICAgfSwKICAgIC8vICdBc3luY2hyb25vdXMgKyBBd2FpdCcgdG8gYXZvaWQgZG91YmxlIFBPU1RJTkcgYSBTdXJ2ZXkKICAgIGFzeW5jIHVwZGF0ZVN1cnZleUZvcm0odmFsKSB7CiAgICAgIGF3YWl0IHRoaXMudXBkYXRlU3VydmV5KHsKICAgICAgICBtSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICBzdXJ2ZXk6IHZhbAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapState","mapActions","Dropdown","RESPONSE_TYPE","isEqual","cloneDeep","required","maxLength","between","HandleValidationErrors","useVuelidate","components","setup","v$","validations","lazySurvey","name","min_threshold","response_type","data","survey","unsavedChangesDialog","discardUnsavedChanges","to","computed","responseTypeList","Object","entries","map","text","value","nameErrors","errors","watch","val","handler","setTimeout","$invalid","updateSurveyForm","deep","beforeRouteLeave","from","next","isSaved","mounted","length","$refs","surveyname","$el","focus","methods","unsavedChangesChoice","choice","$router","push","updateSurvey","mId","$route","params","id"],"sources":["C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\method\\SurveyGeneral.vue"],"sourcesContent":["// http://localhost:8081/method-wizard/2/surveys/5/settings/\r\n\r\n<template>\r\n    <form ref=\"form\" class=\"p-text-left p-fluid p-m-5 p-p-5 p-inputtext-lg\" style=\"width: 1000px; height: 70vh\">\r\n        <!-- {{unsavedChangesDialog}}{{lazySurvey}} <hr> {{survey}} -->\r\n        <div class=\"p-field p-m-3\">\r\n            <label for=\"surveyname\">Survey Name</label>\r\n            <InputText ref=\"surveyname\" id=\"surveyname\" type=\"text\" v-model.lazy=\"lazySurvey.name\" @blur=\"v$.lazySurvey.name.$touch()\" :class=\"{'borderless': nameErrors.length}\" lazy />\r\n            <div class=\"p-error p-text-italic p-pt-1\" v-for=\"error in nameErrors\" :key=\"error\">{{error}}</div>\r\n        </div>\r\n        <div class=\"p-field p-m-3\">\r\n            <label for=\"surveyresponsetype\">Response Type</label>\r\n            <Dropdown id=\"surveyresponsetype\" v-model=\"lazySurvey.response_type\" :options=\"responseTypeList\"  optionLabel=\"value\" optionValue=\"value\" placeholder=\"Select response type\"  @blur=\"v$.lazySurvey.response_type.$touch()\" :class=\"{'p-invalid': v$.lazySurvey.response_type.$invalid}\"/>\r\n        </div>\r\n        <div class=\"p-field p-m-3\">\r\n            <label for=\"surveyminthreshold\">Minimal Response Threshold</label>\r\n            <InputNumber id=\"surveyminthreshold\" suffix=\"%\" :min=\"0\" :max=\"100\" v-model.lazy=\"lazySurvey.min_threshold\" lazy  @blur=\"v$.lazySurvey.min_threshold.$touch()\" :class=\"{'borderless': v$.lazySurvey.min_threshold.$invalid}\" />\r\n        </div>\r\n        <div class=\"p-field p-m-3\">\r\n            <label for=\"welcomingtext\">Welcoming Text</label>\r\n            <Textarea id=\"welcomingtext\" v-model=\"lazySurvey.welcome_text\" :autoResize=\"true\" />\r\n            <!-- <div class=\"p-error p-text-italic\" v-for=\"error in descriptionErrors\" :key=\"error\">{{ error }}</div> -->\r\n        </div>\r\n        <div class=\"p-field p-m-3\">\r\n            <label for=\"closingtext\">Closing Text</label>\r\n            <Textarea id=\"closingtext\" v-model=\"lazySurvey.closing_text\" :autoResize=\"true\" />\r\n            <!-- <div class=\"p-error p-text-italic\" v-for=\"error in descriptionErrors\" :key=\"error\">{{ error }}</div> -->\r\n        </div>\r\n    </form>\r\n    <Dialog v-model:visible=\"unsavedChangesDialog\" header=\"Unsaved Changes\" :modal=\"true\" :dismissableMask=\"true\">\r\n        <div class=\"confirmation-content\">\r\n            This page contains unsaved changes, leaving the page now will destroy these. Do you still wish to leave the page?\r\n        </div>\r\n        <template #footer>\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"unsavedChangesChoice(true)\" />\r\n            <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"unsavedChangesChoice(false)\"/>\r\n      </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\n    import { mapState, mapActions } from 'vuex'\r\n    import Dropdown from 'primevue/dropdown'\r\n    import { RESPONSE_TYPE } from '../../utils/constants'\r\n    import { isEqual, cloneDeep } from 'lodash'\r\n    import { required, maxLength, between } from '../../utils/validators'\r\n    import HandleValidationErrors from '../../utils/HandleValidationErrors'\r\n    import useVuelidate from '@vuelidate/core'\r\n\r\n    export default {\r\n        components: {\r\n            Dropdown\r\n        },\r\n        setup: () => ({ v$: useVuelidate() }),\r\n        validations: {\r\n            lazySurvey: {\r\n                name: { required, maxLength: maxLength(120) },\r\n                min_threshold: { required, between: between(0, 100) },\r\n                response_type: { required }\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                lazySurvey: cloneDeep(this.survey) || {},\r\n                response_type: RESPONSE_TYPE,\r\n                unsavedChangesDialog: false,\r\n                discardUnsavedChanges: false,\r\n                to: null\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('survey', ['survey', 'errors', 'isSaved']),\r\n            // Only allow response types that are specified in the utils/constants file\r\n            responseTypeList () {\r\n                return Object.entries(this.response_type).map(([text, value]) => ({ text, value }))\r\n            },\r\n            nameErrors () {\r\n                return HandleValidationErrors(\r\n                    this.v$.lazySurvey.name,\r\n                    this.errors.name\r\n                )\r\n            }\r\n        },\r\n        watch: {\r\n            survey (val) {\r\n                if (isEqual(this.lazySurvey, val)) { return }\r\n                this.lazySurvey = cloneDeep(val)\r\n            },\r\n            lazySurvey: {\r\n                handler (val) {\r\n                    setTimeout(() => {\r\n                        if (this.v$.$invalid) { return }\r\n                        if (isEqual(this.survey, val)) { return }\r\n                            this.updateSurveyForm(val)\r\n                    }, 200)\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        beforeRouteLeave (to, from, next) {\r\n        if ((this.v$.$invalid || !this.isSaved) & !this.discardUnsavedChanges) {\r\n            this.unsavedChangesDialog = true\r\n            this.to = to\r\n        } else {\r\n            next(true)\r\n        }\r\n    },\r\n        mounted () {\r\n            this.lazySurvey = cloneDeep(this.survey)\r\n            if (!this.lazySurvey.name.length) {\r\n                this.$refs.surveyname.$el.focus()\r\n            }\r\n        },\r\n        methods: {\r\n            ...mapActions('survey', ['updateSurvey']),\r\n            unsavedChangesChoice (choice) {\r\n                this.unsavedChangesDialog = false\r\n                this.discardUnsavedChanges = choice\r\n                if (choice) {\r\n                    this.$router.push(this.to)\r\n                }\r\n            },\r\n            // 'Asynchronous + Await' to avoid double POSTING a Survey\r\n            async updateSurveyForm (val) {\r\n                await this.updateSurvey({ mId: this.$route.params.id, survey: val })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .p-inputtext {\r\n        border: none;\r\n        border-bottom: 1px solid lightgrey;\r\n    }\r\n    .borderless {\r\n        border-bottom: 1px solid red;\r\n    }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}