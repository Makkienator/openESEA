{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\store\\modules\\authentication.js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\store\\modules\\authentication.js","mtime":1707572265393},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1741014586138}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IEF4aW9zSW5zdGFuY2UgfSBmcm9tICcuLi8uLi9wbHVnaW5zL2F4aW9zJzsKLy8gaW1wb3J0IHsgU1RBVFVTIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAnLi4vLi4vc2VydmljZXMvVXNlclNlcnZpY2UnOwppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBhY2Nlc3NUb2tlbjogbnVsbCwKICAgIHJlZnJlc2hUb2tlbjogbnVsbCwKICAgIGF1dGhlbnRpY2F0ZWRVc2VyOiBudWxsLAogICAgY3VycmVudHVzZXI6ICdVc2VybmFtZSBoZXJlJywKICAgIHBhc3N3b3JkOiBudWxsLAogICAgZXJyb3JzOiB7fQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICB1cGRhdGVTdG9yYWdlKHN0YXRlLCB7CiAgICAgIGFjY2VzcywKICAgICAgcmVmcmVzaAogICAgfSkgewogICAgICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IGFjY2VzczsKICAgICAgc3RhdGUucmVmcmVzaFRva2VuID0gcmVmcmVzaDsKICAgIH0sCiAgICBkZXN0cm95VG9rZW4oc3RhdGUpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgfSk7CiAgICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gbnVsbDsKICAgICAgc3RhdGUucmVmcmVzaFRva2VuID0gbnVsbDsKICAgICAgc3RhdGUuYXV0aGVudGljYXRlZFVzZXIgPSBudWxsOwogICAgICBzdGF0ZS5jdXJyZW50dXNlciA9IG51bGw7CiAgICB9LAogICAgVXBkYXRlQ3VycmVudFVzZXIoc3RhdGUsIHVzZXJuYW1lKSB7CiAgICAgIHN0YXRlLmN1cnJlbnR1c2VyID0gdXNlcm5hbWU7CiAgICB9LAogICAgc2F2ZUF1dGhlbnRpY2F0ZWRVc2VyRGV0YWlscyhzdGF0ZSwgewogICAgICBkYXRhCiAgICB9KSB7CiAgICAgIHN0YXRlLmF1dGhlbnRpY2F0ZWRVc2VyID0gZGF0YVswXTsKICAgIH0sCiAgICBzZXRFcnJvcnMoc3RhdGUsIHsKICAgICAgZXJyb3JzCiAgICB9KSB7CiAgICAgIHN0YXRlLmVycm9ycyA9IGVycm9yczsKICAgIH0sCiAgICBjbGVhckVycm9ycyhzdGF0ZSkgewogICAgICBzdGF0ZS5lcnJvcnMgPSB7fTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGxvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5hY2Nlc3NUb2tlbiAhPSBudWxsICYgc3RhdGUuYXV0aGVudGljYXRlZFVzZXIgIT0gbnVsbDsKICAgIH0sCiAgICBBdXRoZW50aWNhdGlvblRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5hY2Nlc3NUb2tlbjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGFzeW5jIHVzZXJSZWdpc3Rlcih7CiAgICAgIGNvbW1pdCwKICAgICAgc3RhdGUKICAgIH0sIG5ld3VzZXIpIHsKICAgICAgc3RhdGUuZXJyb3JzID0ge307CiAgICAgIGF3YWl0IEF4aW9zSW5zdGFuY2UucG9zdCgnL2FjY291bnQvcmVnaXN0ZXIvJywgbmV3dXNlcikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29tbWl0KCdzZXRFcnJvcnMnLCB7CiAgICAgICAgICBlcnJvcnM6IGVycm9yLnJlc3BvbnNlLmRhdGEKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgdXNlckxvZ291dCh7CiAgICAgIGNvbW1pdCwKICAgICAgZ2V0dGVycwogICAgfSkgewogICAgICBpZiAoZ2V0dGVycy5sb2dnZWRJbikgewogICAgICAgIGNvbW1pdCgnZGVzdHJveVRva2VuJyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB1c2VyTG9naW4oewogICAgICBjb21taXQsCiAgICAgIGRpc3BhdGNoCiAgICB9LCB1c2VyY3JlZGVudGlhbHMpIHsKICAgICAgYXdhaXQgQXhpb3NJbnN0YW5jZS5wb3N0KCcvYXBpLXRva2VuLycsIHsKICAgICAgICB1c2VybmFtZTogdXNlcmNyZWRlbnRpYWxzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB1c2VyY3JlZGVudGlhbHMucGFzc3dvcmQKICAgICAgfSkudGhlbihhc3luYyByZXNwb25zZSA9PiB7CiAgICAgICAgYXdhaXQgY29tbWl0KCd1cGRhdGVTdG9yYWdlJywgewogICAgICAgICAgYWNjZXNzOiByZXNwb25zZS5kYXRhLmFjY2VzcywKICAgICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmRhdGEucmVmcmVzaAogICAgICAgIH0pOwogICAgICAgIGF3YWl0IGRpc3BhdGNoKCdzYXZlQXV0aGVudGljYXRlZFVzZXJEZXRhaWxzJyk7CiAgICAgICAgY29tbWl0KCdVcGRhdGVDdXJyZW50VXNlcicsIHVzZXJjcmVkZW50aWFscy51c2VybmFtZSk7CiAgICAgICAgZGlzcGF0Y2goJ3Rva2VuRXhwaXJhdGlvblRpbWVyJyk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHJlZnJlc2hBY2Nlc3NUb2tlbih7CiAgICAgIGNvbW1pdCwKICAgICAgc3RhdGUKICAgIH0pIHsKICAgICAgYXdhaXQgQXhpb3NJbnN0YW5jZS5wb3N0KCdhcGktcmVmcmVzaC8nLCB7CiAgICAgICAgcmVmcmVzaDogc3RhdGUucmVmcmVzaFRva2VuCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbW1pdCgndXBkYXRlU3RvcmFnZScsIHsKICAgICAgICAgIGFjY2VzczogcmVzcG9uc2UuZGF0YS5hY2Nlc3MsCiAgICAgICAgICByZWZyZXNoOiBzdGF0ZS5yZWZyZXNoVG9rZW4KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIGNvbW1pdCgnZGVzdHJveVRva2VuJyk7CiAgICAgIH0pOwogICAgfSwKICAgIHRva2VuRXhwaXJhdGlvblRpbWVyKHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHZhciB0aW1lb3V0OwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb21taXQoJ2Rlc3Ryb3lUb2tlbicpOwogICAgICB9LCAzMCAqIDYwICogMTAwMCk7CiAgICB9LAogICAgYXN5bmMgc2F2ZUF1dGhlbnRpY2F0ZWRVc2VyRGV0YWlscyhjb250ZXh0KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICByZXNwb25zZSwKICAgICAgICBlcnJvcgogICAgICB9ID0gYXdhaXQgVXNlclNlcnZpY2UuZ2V0KHsKICAgICAgICBxdWVyeTogJz9jdXJyZW50dXNlcj0xJwogICAgICB9KTsKICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb250ZXh0LmNvbW1pdCgnc2F2ZUF1dGhlbnRpY2F0ZWRVc2VyRGV0YWlscycsIHJlc3BvbnNlKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["AxiosInstance","UserService","router","namespaced","state","accessToken","refreshToken","authenticatedUser","currentuser","password","errors","mutations","updateStorage","access","refresh","destroyToken","push","name","UpdateCurrentUser","username","saveAuthenticatedUserDetails","data","setErrors","clearErrors","getters","loggedIn","AuthenticationToken","actions","userRegister","commit","newuser","post","then","response","catch","error","userLogout","userLogin","dispatch","usercredentials","refreshAccessToken","err","console","log","tokenExpirationTimer","timeout","clearTimeout","setTimeout","context","get","query"],"sources":["C:/Users/Marc/source/repos/openESEA/openESEA_interpreter/frontend/src/store/modules/authentication.js"],"sourcesContent":["import { AxiosInstance } from '../../plugins/axios'\r\n// import { STATUS } from '../../utils/constants'\r\nimport UserService from '../../services/UserService'\r\nimport router from '../../router'\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state: {\r\n        accessToken: null,\r\n        refreshToken: null,\r\n        authenticatedUser: null,\r\n        currentuser: 'Username here',\r\n        password: null,\r\n        errors: {}\r\n    },\r\n    mutations: {\r\n        updateStorage (state, { access, refresh }) {\r\n          state.accessToken = access\r\n          state.refreshToken = refresh\r\n        },\r\n        destroyToken (state) {\r\n            router.push({ name: 'login' })\r\n            state.accessToken = null\r\n            state.refreshToken = null\r\n            state.authenticatedUser = null\r\n            state.currentuser = null\r\n        },\r\n        UpdateCurrentUser (state, username) {\r\n            state.currentuser = username\r\n        },\r\n        saveAuthenticatedUserDetails (state, { data }) {\r\n          state.authenticatedUser = data[0]\r\n        },\r\n        setErrors (state, { errors }) {\r\n          state.errors = errors\r\n        },\r\n        clearErrors (state) {\r\n          state.errors = {}\r\n        }\r\n    },\r\n    getters: {\r\n        loggedIn (state) {\r\n          return ((state.accessToken != null) & (state.authenticatedUser != null))\r\n        },\r\n        AuthenticationToken (state) {\r\n          return state.accessToken\r\n        }\r\n      },\r\n\r\n    actions: {\r\n        async userRegister ({ commit, state }, newuser) {\r\n          state.errors = {}\r\n          await AxiosInstance.post('/account/register/', newuser)\r\n          .then((response) => { router.push({ name: 'login' }) })\r\n          .catch((error) => { commit('setErrors', { errors: error.response.data }) })\r\n        },\r\n        userLogout ({ commit, getters }) {\r\n            if (getters.loggedIn) {\r\n                commit('destroyToken')\r\n            }\r\n        },\r\n        async userLogin ({ commit, dispatch }, usercredentials) {\r\n          await AxiosInstance.post('/api-token/', {\r\n            username: usercredentials.username,\r\n            password: usercredentials.password\r\n          })\r\n          .then(async (response) => {\r\n            await commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\r\n            await dispatch('saveAuthenticatedUserDetails')\r\n            commit('UpdateCurrentUser', usercredentials.username)\r\n            dispatch('tokenExpirationTimer')\r\n          })\r\n        },\r\n        async refreshAccessToken ({ commit, state }) {\r\n          await AxiosInstance.post('api-refresh/', {\r\n            refresh: state.refreshToken\r\n          })\r\n          .then((response) => {\r\n            commit('updateStorage', { access: response.data.access, refresh: state.refreshToken })\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n            commit('destroyToken')\r\n          })\r\n        },\r\n        tokenExpirationTimer ({ commit }) {\r\n          var timeout\r\n          clearTimeout(timeout)\r\n          timeout = setTimeout(() => {\r\n            commit('destroyToken')\r\n          }, 30 * 60 * 1000)\r\n        },\r\n        async saveAuthenticatedUserDetails (context) {\r\n          const { response, error } = await UserService.get({ query: '?currentuser=1' })\r\n          if (error) {\r\n            console.log(error)\r\n            return\r\n          }\r\n          context.commit('saveAuthenticatedUserDetails', response)\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]}]}