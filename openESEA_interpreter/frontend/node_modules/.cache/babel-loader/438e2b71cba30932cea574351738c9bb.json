{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\batch\\BatchAuditSelection.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\batch\\BatchAuditSelection.vue","mtime":1707572265488},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1741014595374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5zb21lLmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IERyb3Bkb3duIGZyb20gJ3ByaW1ldnVlL2Ryb3Bkb3duJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERyb3Bkb3duCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGVscERpYWxvZzogZmFsc2UsCiAgICAgIHNlbGVjdGVkT3JnYW5pc2F0aW9uczogW10sCiAgICAgIEFkZEF1ZGl0b3JEaWFsb2c6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdlc2VhQWNjb3VudCcsIFsnZXNlYUFjY291bnRzJywgJ2VzZWFBY2NvdW50J10pLAogICAgLi4ubWFwU3RhdGUoJ2NhbXBhaWduJywgWydjYW1wYWlnbiddKSwKICAgIC4uLm1hcFN0YXRlKCduZXR3b3JrVGVhbScsIFsnbmV0d29ya21lbWJlcnMnXSksCiAgICAuLi5tYXBHZXR0ZXJzKCduZXR3b3JrVGVhbScsIFsnbmV0d29ya0F1ZGl0b3JzJ10pCiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5mZXRjaEVzZWFBY2NvdW50cyh7CiAgICAgIHF1ZXJ5OiBgP2NhbXBhaWduPSR7dGhpcy4kcm91dGUucGFyYW1zLkNhbXBhaWduSWR9YAogICAgfSk7CiAgICB0aGlzLnNlbGVjdGVkT3JnYW5pc2F0aW9ucyA9IHRoaXMuZXNlYUFjY291bnRzLmZpbHRlcihlc2VhQWNjb3VudCA9PiBlc2VhQWNjb3VudC5hY2NvdW50X2F1ZGl0LnN0YXR1cyA9PT0gJ2luIHByb2dyZXNzJyB8fCBlc2VhQWNjb3VudC5hY2NvdW50X2F1ZGl0LnN0YXR1cyA9PT0gJ2ZpbmlzaGVkJyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCdlc2VhQWNjb3VudCcsIFsnZmV0Y2hFc2VhQWNjb3VudHMnXSksCiAgICAuLi5tYXBBY3Rpb25zKCduZXR3b3JrVGVhbScsIFsnZmV0Y2hOZXR3b3JrTWVtYmVycyddKSwKICAgIC4uLm1hcEFjdGlvbnMoJ2FjY291bnRBdWRpdCcsIFsndXBkYXRlQWNjb3VudEF1ZGl0JywgJ2ZldGNoQWNjb3VudEF1ZGl0cycsICdjaGFuZ2VTdGFydGVkQXVkaXQnXSksCiAgICAuLi5tYXBBY3Rpb25zKCdjYW1wYWlnbicsIFsndXBkYXRlQ2FtcGFpZ24nXSksCiAgICBhc3luYyBnb1RvQXVkaXQoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkT3JnYW5pc2F0aW9ucy5zb21lKGl0ZW0gPT4gaXRlbS5hY2NvdW50X2F1ZGl0LmF1ZGl0b3IgPT09IG51bGwpKSB7CiAgICAgICAgdGhpcy5BZGRBdWRpdG9yRGlhbG9nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZURhdGFiYXNlKCk7CiAgICAgICAgdGhpcy5jYW1wYWlnbi5hdWRpdHN0YXR1cyA9ICdBdWRpdHMgaW4gUHJvZ3Jlc3MnOwogICAgICAgIGRlbGV0ZSB0aGlzLmNhbXBhaWduLmltYWdlOwogICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ2FtcGFpZ24oewogICAgICAgICAgbklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuTmV0d29ya0lkLAogICAgICAgICAgZGF0YTogdGhpcy5jYW1wYWlnbgogICAgICAgIH0pOwogICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hBY2NvdW50QXVkaXRzKHsKICAgICAgICAgIHF1ZXJ5OiBgP2NhbXBhaWduPSR7dGhpcy4kcm91dGUucGFyYW1zLkNhbXBhaWduSWR9JmF1ZGl0LXNlbGVjdGlvbj10cnVlYAogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2hhbmdlU3RhcnRlZEF1ZGl0KHRydWUpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdiYXRjaGF1ZGl0b3ZlcnZpZXcnLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIE5ldHdvcmtJZDogdGhpcy4kcm91dGUucGFyYW1zLk5ldHdvcmtJZCwKICAgICAgICAgICAgQ2FtcGFpZ25JZDogdGhpcy4kcm91dGUucGFyYW1zLkNhbXBhaWduSWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZURhdGFiYXNlKCkgewogICAgICB0aGlzLnNlbGVjdGVkT3JnYW5pc2F0aW9ucy5mb3JFYWNoKGVzZWFBY2NvdW50ID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gZXNlYUFjY291bnQuYWNjb3VudF9hdWRpdDsKICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdub3Qgc3RhcnRlZCcpIHsKICAgICAgICAgIGRhdGEuc3RhdHVzID0gJ2luIHByb2dyZXNzJzsKICAgICAgICAgIGNvbnNvbGUubG9nKCctLT4nLCBkYXRhKTsKICAgICAgICAgIGVzZWFBY2NvdW50LmFjY291bnRfYXVkaXQgPSBkYXRhOwogICAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50QXVkaXQoewogICAgICAgICAgICBvSWQ6IGVzZWFBY2NvdW50Lm9yZ2FuaXNhdGlvbiwKICAgICAgICAgICAgZWFJZDogZXNlYUFjY291bnQuaWQsCiAgICAgICAgICAgIGRhdGE6IGVzZWFBY2NvdW50LmFjY291bnRfYXVkaXQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvLyBMaXN0T2ZJZHMucHVzaCh7IGlkOiBvcmdhbmlzYXRpb24uaWQsIG9yZ2FuaXNhdGlvbjogb3JnYW5pc2F0aW9uLm9yZ2FuaXNhdGlvbgogICAgICAgIC8vIH0pCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapState","mapActions","mapGetters","Dropdown","components","data","helpDialog","selectedOrganisations","AddAuditorDialog","computed","created","fetchEseaAccounts","query","$route","params","CampaignId","eseaAccounts","filter","eseaAccount","account_audit","status","methods","goToAudit","some","item","auditor","updateDatabase","campaign","auditstatus","image","updateCampaign","nId","NetworkId","fetchAccountAudits","changeStartedAudit","$router","push","name","forEach","console","log","updateAccountAudit","oId","organisation","eaId","id"],"sources":["C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\audit\\batch\\BatchAuditSelection.vue"],"sourcesContent":["<template>\r\n    <div class=\"p-mx-3\">\r\n        <div class=\"p-d-flex p-ai-center p-jc-between\">\r\n            <h2 class=\"p-text-left\">Organisation Selection</h2>\r\n            <Button @click=\"(helpDialog = !helpDialog)\" label=\"Help\" class=\"p-button-sm p-button-warning\" icon=\"pi pi-external-link\" />\r\n        </div>\r\n        <DataTable :value=\"eseaAccounts\" dataKey=\"id\" v-model:selection=\"selectedOrganisations\" showGridlines autoLayout\r\n            :paginator=\"true\" :rows=\"10\" :filters=\"filters\" paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n            :rowsPerPageOptions=\"[5,10,25]\" currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" class=\"p-datatable-striped\">\r\n\r\n            <Column selectionMode=\"multiple\" headerStyle=\"width: 3em\"></Column>\r\n            <Column field=\"organisation_name\" header=\"Organisation\" />\r\n            <Column header=\"Auditor\" headerStyle=\"min-width: 250px;\">\r\n                <template #body=\"{data}\">\r\n                    <Dropdown v-if=\"selectedOrganisations.includes(data)\" v-model=\"data.account_audit.auditor\" :options=\"networkAuditors\"  optionLabel=\"user_name\" optionValue=\"user_name\" placeholder=\"Select an Auditor\" class=\"p-m-0 p-p-0\" style=\"width: 100%;\" />\r\n                    <span v-else>{{data.account_audit.auditor}}</span>\r\n                </template>\r\n            </Column>\r\n            <Column field=\"account_audit.status\" header=\"status\" />\r\n            <Column field=\"recommendations\" header=\"Recommendations\" headerStyle=\"width: 200px;\">\r\n                <template #body=\"{data}\">\r\n                    <Button :label=\"`${data.id} Recommendations`\" class=\"p-button-sm p-button-rounded p-py-1 p-button-danger\" style=\"width: 180px\" :disabled=\"true\" />\r\n                </template>\r\n            </Column>\r\n        </Datatable>\r\n\r\n        <div class=\"p-text-right p-col-12 p-as-end\">\r\n            <Button class=\"p-my-5\" label=\"Start audit\" @click=\"goToAudit\" icon=\"pi pi-check\" :disabled=\"!selectedOrganisations.length\" />\r\n        </div>\r\n    </div>\r\n\r\n    <Dialog v-model:visible=\"AddAuditorDialog\" style=\"width: 500px;\" header=\"Help\" :modal=\"true\" dismissableMask=\"true\">\r\n        <p>Make sure that all selected Organisations are assigned an auditor.</p>\r\n\r\n        <template #footer>\r\n            <Button label=\"Ok\" icon=\"pi pi-check\" @click=\"(AddAuditorDialog = !AddAuditorDialog)\" />\r\n        </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\n    import { mapState, mapActions, mapGetters } from 'vuex'\r\n    import Dropdown from 'primevue/dropdown'\r\n\r\n    export default {\r\n        components: {\r\n            Dropdown\r\n        },\r\n        data () {\r\n            return {\r\n                helpDialog: false,\r\n                selectedOrganisations: [],\r\n                AddAuditorDialog: false\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('eseaAccount', ['eseaAccounts', 'eseaAccount']),\r\n            ...mapState('campaign', ['campaign']),\r\n            ...mapState('networkTeam', ['networkmembers']),\r\n            ...mapGetters('networkTeam', ['networkAuditors'])\r\n        },\r\n        async created () {\r\n            await this.fetchEseaAccounts({ query: `?campaign=${this.$route.params.CampaignId}` })\r\n            this.selectedOrganisations = this.eseaAccounts.filter(eseaAccount => (eseaAccount.account_audit.status === 'in progress' || eseaAccount.account_audit.status === 'finished'))\r\n    },\r\n        methods: {\r\n            ...mapActions('eseaAccount', ['fetchEseaAccounts']),\r\n            ...mapActions('networkTeam', ['fetchNetworkMembers']),\r\n            ...mapActions('accountAudit', ['updateAccountAudit', 'fetchAccountAudits', 'changeStartedAudit']),\r\n            ...mapActions('campaign', ['updateCampaign']),\r\n            async goToAudit () {\r\n                if (this.selectedOrganisations.some(item => item.account_audit.auditor === null)) {\r\n                    this.AddAuditorDialog = true\r\n                } else {\r\n                    await this.updateDatabase()\r\n                    this.campaign.auditstatus = 'Audits in Progress'\r\n                    delete this.campaign.image\r\n                    await this.updateCampaign({ nId: this.$route.params.NetworkId, data: this.campaign })\r\n                    await this.fetchAccountAudits({ query: `?campaign=${this.$route.params.CampaignId}&audit-selection=true` })\r\n                    this.changeStartedAudit(true)\r\n                    this.$router.push({ name: 'batchauditoverview', params: { NetworkId: this.$route.params.NetworkId, CampaignId: this.$route.params.CampaignId } })\r\n                }\r\n            },\r\n            updateDatabase () {\r\n                this.selectedOrganisations.forEach((eseaAccount) => {\r\n                    const data = eseaAccount.account_audit\r\n                    if (data.status === 'not started') {\r\n                        data.status = 'in progress'\r\n                        console.log('-->', data)\r\n                        eseaAccount.account_audit = data\r\n                        this.updateAccountAudit({ oId: eseaAccount.organisation, eaId: eseaAccount.id, data: eseaAccount.account_audit })\r\n                    }\r\n                    // ListOfIds.push({ id: organisation.id, organisation: organisation.organisation\r\n                    // })\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}