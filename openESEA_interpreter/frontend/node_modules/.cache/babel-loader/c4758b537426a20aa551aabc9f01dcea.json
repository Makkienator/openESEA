{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\network\\NetworkOrganisations.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\network\\NetworkOrganisations.vue","mtime":1707572265517},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1741014595374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBTdGF0ZSwgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgT3JnYW5pc2F0aW9uTGlzdCBmcm9tICcuLi8uLi9jb21wb25lbnRzL2xpc3RzL09yZ2FuaXNhdGlvbkxpc3QnOwppbXBvcnQgSW52aXRhdGlvbldpbmRvdyBmcm9tICcuLi8uLi9jb21wb25lbnRzL0ludml0YXRpb25XaW5kb3cnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgT3JnYW5pc2F0aW9uTGlzdCwKICAgIEludml0YXRpb25XaW5kb3cKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWZyZXNoOiBmYWxzZSwKICAgICAgaW52aXRhYmxlT3JnYW5pc2F0aW9uczogZmFsc2UsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHNlbGVjdGVkT3JnYW5pc2F0aW9uOiBudWxsLAogICAgICBpbnZpdGVEaWFsb2c6IGZhbHNlLAogICAgICByZW1vdmVEaWFsb2c6IGZhbHNlLAogICAgICBjb2x1bW5zOiBbewogICAgICAgIGZpZWxkOiAnb3JnYW5pc2F0aW9uX25hbWUnLAogICAgICAgIGhlYWRlcjogJ05hbWUnCiAgICAgIH0sIHsKICAgICAgICBmaWVsZDogJ29yZ2FuaXNhdGlvbl9kZXNjcmlwdGlvbicsCiAgICAgICAgaGVhZGVyOiAnRGVzY3JpcHRpb24nCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCduZXR3b3JrJywgWyduZXR3b3JrJ10pLAogICAgLy8gbWVtYmVyc2hpcCBzdGFuZHMgZm9yICdtZW1iZXJzaGlwIHJlcXVlc3RzJwogICAgLi4ubWFwU3RhdGUoJ21lbWJlcnNoaXAnLCBbJ21lbWJlcnNoaXBzJ10pLAogICAgLy8gV2hldGhlciBOZXR3b3JrIG9yIE9yZ2FuaXNhdGlvbiBoYXMgcmVxdWVzdGVkIHRoZSBtZW1iZXJzaGlwCiAgICAuLi5tYXBHZXR0ZXJzKCdtZW1iZXJzaGlwJywgWydyZXF1ZXN0c0J5TmV0d29yaycsICdyZXF1ZXN0c0J5T3JnYW5pc2F0aW9uJ10pLAogICAgcGVybWlzc2lvbigpIHsKICAgICAgaWYgKHRoaXMubmV0d29yay5hY2Nlc0xldmVsKSB7CiAgICAgICAgY29uc3QgYWNjZXNMZXZlbCA9IHRoaXMubmV0d29yay5hY2Nlc0xldmVsOwogICAgICAgIGlmIChhY2Nlc0xldmVsID09PSAnYWRtaW4nIHx8IGFjY2VzTGV2ZWwgPT09ICduZXR3b3JrIGFkbWluJykgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnJlZnJlc2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCduZXR3b3JrJywgWydwYXRjaE5ldHdvcmsnXSksCiAgICAuLi5tYXBBY3Rpb25zKCdtZW1iZXJzaGlwJywgWydmZXRjaE1lbWJlcnNoaXBzJywgJ2NyZWF0ZU1lbWJlcnNoaXAnXSksCiAgICBhc3luYyByZWZyZXNoRGF0YSgpIHsKICAgICAgdGhpcy5yZWZyZXNoID0gIXRoaXMucmVmcmVzaDsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgYXdhaXQgdGhpcy5mZXRjaE1lbWJlcnNoaXBzKHsKICAgICAgICBxdWVyeTogYD9uZXR3b3JrPSR7dGhpcy4kcm91dGUucGFyYW1zLk5ldHdvcmtJZH1gCiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBvcGVuT3JnYW5pc2F0aW9uUmVtb3ZhbERpYWxvZyhvcmdhbmlzYXRpb24pIHsKICAgICAgdGhpcy5zZWxlY3RlZE9yZ2FuaXNhdGlvbiA9IG9yZ2FuaXNhdGlvbjsKICAgICAgdGhpcy5yZW1vdmVEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIHJlbW92ZU9yZ2FuaXNhdGlvbigpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcmdhbmlzYXRpb24uaWQpIHsKICAgICAgICB2YXIgX3RoaXMkbmV0d29yaywgX3RoaXMkbmV0d29yayRvcmdhbmlzOwogICAgICAgIHZhciBuZXdMaXN0T2ZPcmdhbmlzYXRpb25zID0gKF90aGlzJG5ldHdvcmsgPSB0aGlzLm5ldHdvcmspID09PSBudWxsIHx8IF90aGlzJG5ldHdvcmsgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRuZXR3b3JrJG9yZ2FuaXMgPSBfdGhpcyRuZXR3b3JrLm9yZ2FuaXNhdGlvbnMpID09PSBudWxsIHx8IF90aGlzJG5ldHdvcmskb3JnYW5pcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbmV0d29yayRvcmdhbmlzLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IHRoaXMuc2VsZWN0ZWRPcmdhbmlzYXRpb24uaWQpOwogICAgICAgIGF3YWl0IHRoaXMucGF0Y2hOZXR3b3JrKHsKICAgICAgICAgIG9yZ2FuaXNhdGlvbnM6IG5ld0xpc3RPZk9yZ2FuaXNhdGlvbnMKICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlbW92ZURpYWxvZyA9IGZhbHNlOwogICAgICAgIHRoaXMucmVmcmVzaERhdGEoKTsKICAgICAgfQogICAgfSwKICAgIG9wZW5PcmdhbmlzYXRpb25JbnZpdGF0aW9uRGlhbG9nKG9yZ2FuaXNhdGlvbikgewogICAgICB0aGlzLnNlbGVjdGVkT3JnYW5pc2F0aW9uID0gb3JnYW5pc2F0aW9uOwogICAgICB0aGlzLmludml0ZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgYXN5bmMgaW52aXRlT3JnYW5pc2F0aW9uKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RlZE9yZ2FuaXNhdGlvbi5pZCkgewogICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTWVtYmVyc2hpcCh7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIG5ldHdvcms6IHRoaXMuJHJvdXRlLnBhcmFtcy5OZXR3b3JrSWQsCiAgICAgICAgICAgIG9yZ2FuaXNhdGlvbjogdGhpcy5zZWxlY3RlZE9yZ2FuaXNhdGlvbi5pZCwKICAgICAgICAgICAgcmVxdWVzdGVyOiAnbmV0d29yaycKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmludml0ZURpYWxvZyA9IGZhbHNlOwogICAgICAgIHRoaXMucmVmcmVzaERhdGEoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["mapActions","mapState","mapGetters","OrganisationList","InvitationWindow","components","data","refresh","invitableOrganisations","loading","selectedOrganisation","inviteDialog","removeDialog","columns","field","header","computed","permission","network","accesLevel","created","refreshData","methods","fetchMemberships","query","$route","params","NetworkId","openOrganisationRemovalDialog","organisation","removeOrganisation","id","_this$network","_this$network$organis","newListOfOrganisations","organisations","filter","item","patchNetwork","openOrganisationInvitationDialog","inviteOrganisation","createMembership","requester"],"sources":["C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\views\\network\\NetworkOrganisations.vue"],"sourcesContent":["// http://localhost:8080/network/1/organisations/\r\n\r\n<template>\r\n    <organisation-list :permission=\"permission\" v-model:refresh=\"refresh\" :networkorganisations=\"true\" :invitableorganisations=\"invitableOrganisations\" @invite-organisation=\"openOrganisationInvitationDialog\" @remove-organisation=\"openOrganisationRemovalDialog\">\r\n        <Button v-if=\"permission\" :label=\"(invitableOrganisations) ? 'Show own Organisations':'Invite Organisations'\" :class=\"(invitableOrganisations) ? 'p-button-warning':'p-button-success'\" @click=\"invitableOrganisations= !invitableOrganisations\" />\r\n    </organisation-list>\r\n\r\n    <invitation-window v-if=\"permission\" parenttype=\"network\" @refresh=\"refreshData()\"/>\r\n\r\n    <Dialog v-model:visible=\"removeDialog\" style=\"width: 500px\" header=\"Confirm Deletion\" :modal=\"true\"  :dismissableMask=\"true\">\r\n            Are you sure you want to <b>delete</b> the following organisation(s)?\r\n            <div class=\"p-shadow-1 p-p-3 p-m-5\">{{selectedOrganisation.name}}</div>\r\n        <template #footer>\r\n            <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"removeDialog=false\" />\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"removeOrganisation\" />\r\n      </template>\r\n    </Dialog>\r\n\r\n    <Dialog v-model:visible=\"inviteDialog\" class=\"p-fluid\" style=\"width: 500px\" :header=\"`Organisation: ${selectedOrganisation?.name}`\" :modal=\"true\" :dismissableMask=\"true\">\r\n        <div class=\"p-field\">\r\n        <label for=\"message\">Message</label>\r\n        <Textarea id=\"message\" v-model=\"something\" rows=\"5\" :autoResize=\"true\" placeholder=\"Write a message to the organisation you want to invite.\" />\r\n        </div>\r\n        <template #footer>\r\n            <Button label=\"Cancel\" icon=\"pi pi-times\" @click=\"inviteDialog=false\" class=\"p-button-text\"/>\r\n            <Button label=\"Invite Organisation\" icon=\"pi pi-check\" @click=\"inviteOrganisation\" />\r\n        </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\n    import { mapActions, mapState, mapGetters } from 'vuex'\r\n    import OrganisationList from '../../components/lists/OrganisationList'\r\n    import InvitationWindow from '../../components/InvitationWindow'\r\n\r\n    export default {\r\n        components: {\r\n            OrganisationList,\r\n            InvitationWindow\r\n        },\r\n        data () {\r\n            return {\r\n                refresh: false,\r\n                invitableOrganisations: false,\r\n                loading: true,\r\n                selectedOrganisation: null,\r\n                inviteDialog: false,\r\n                removeDialog: false,\r\n                columns: [\r\n                        { field: 'organisation_name', header: 'Name' },\r\n                        { field: 'organisation_description', header: 'Description' }\r\n                    ]\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('network', ['network']),\r\n            // membership stands for 'membership requests'\r\n            ...mapState('membership', ['memberships']),\r\n            // Whether Network or Organisation has requested the membership\r\n            ...mapGetters('membership', ['requestsByNetwork', 'requestsByOrganisation']),\r\n            permission () {\r\n                if (this.network.accesLevel) {\r\n                    const accesLevel = this.network.accesLevel\r\n                    if (accesLevel === 'admin' || accesLevel === 'network admin') {\r\n                        return true\r\n                    }\r\n                }\r\n                return false\r\n            }\r\n        },\r\n        async created () {\r\n            this.refreshData()\r\n        },\r\n        methods: {\r\n            ...mapActions('network', ['patchNetwork']),\r\n            ...mapActions('membership', ['fetchMemberships', 'createMembership']),\r\n            async refreshData () {\r\n                this.refresh = !this.refresh\r\n                this.loading = true\r\n                await this.fetchMemberships({ query: `?network=${this.$route.params.NetworkId}` })\r\n                this.loading = false\r\n            },\r\n            openOrganisationRemovalDialog (organisation) {\r\n                this.selectedOrganisation = organisation\r\n                this.removeDialog = true\r\n            },\r\n            async removeOrganisation () {\r\n                if (this.selectedOrganisation.id) {\r\n                    var newListOfOrganisations = this.network?.organisations?.filter(item => item !== this.selectedOrganisation.id)\r\n                    await this.patchNetwork({ organisations: newListOfOrganisations })\r\n                    this.removeDialog = false\r\n                    this.refreshData()\r\n                }\r\n            },\r\n            openOrganisationInvitationDialog (organisation) {\r\n                this.selectedOrganisation = organisation\r\n                this.inviteDialog = true\r\n            },\r\n            async inviteOrganisation () {\r\n                if (this.selectedOrganisation.id) {\r\n                    await this.createMembership({ data: { network: this.$route.params.NetworkId, organisation: this.selectedOrganisation.id, requester: 'network' } })\r\n                    this.inviteDialog = false\r\n                    this.refreshData()\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}