{"remainingRequest":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\components\\forms\\EseaAccountForm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\components\\forms\\EseaAccountForm.vue","mtime":1707572265302},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\babel.config.js","mtime":1707572265264},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1741014593746},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741014584802},{"path":"C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1741014595374}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0IHVzZVZ1ZWxpZGF0ZSBmcm9tICdAdnVlbGlkYXRlL2NvcmUnOwppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmltcG9ydCBEcm9wZG93biBmcm9tICdwcmltZXZ1ZS9kcm9wZG93bic7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBEcm9wZG93bgogIH0sCiAgcHJvcHM6IHsKICAgIGVzZWFBY2NvdW50czogewogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVzZWFhY2NvdW50Rm9ybTogewogICAgICAgIG1ldGhvZDogbnVsbCwKICAgICAgICB5ZWFyOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ21ldGhvZCcsIFsnbWV0aG9kcyddKSwKICAgIC4uLm1hcFN0YXRlKCdlc2VhQWNjb3VudCcsIFsnZXNlYUFjY291bnQnXSksCiAgICBmaWx0ZXJlZEVzZWFBY2NvdW50cygpIHsKICAgICAgcmV0dXJuIHRoaXMuZXNlYUFjY291bnRzLmZpbHRlcihlc2VhQWNjb3VudCA9PiBlc2VhQWNjb3VudC55ZWFyID09PSB0aGlzLmVzZWFhY2NvdW50Rm9ybS55ZWFyICYmIGVzZWFBY2NvdW50Lm1ldGhvZF9uYW1lLmluY2x1ZGVzKHRoaXMuZXNlYWFjY291bnRGb3JtLm1ldGhvZC5uYW1lKSk7IC8vIC5maWx0ZXIoZXNlYUFjY291bnQgPT4geyByZXR1cm4gZXNlYUFjY291bnQueWVhci5pbmNsdWRlcygyMDIwKSB9KQogICAgfSwKICAgIHBvc3NpYmxleWVhcnMoKSB7CiAgICAgIGNvbnN0IGN1cnJlbnR5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBtaW55ZWFyID0gY3VycmVudHllYXIgLSAxMDsKICAgICAgY29uc3QgeWVhcnMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IG1pbnllYXI7IGkgPD0gY3VycmVudHllYXI7IGkrKykgewogICAgICAgIHllYXJzLnB1c2goaSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHllYXJzOwogICAgfQogIH0sCiAgc2V0dXA6ICgpID0+ICh7CiAgICB2JDogdXNlVnVlbGlkYXRlKCkKICB9KSwKICB2YWxpZGF0aW9uczogewogICAgZXNlYWFjY291bnRGb3JtOiB7CiAgICAgIG1ldGhvZDogewogICAgICAgIHJlcXVpcmVkCiAgICAgIH0sCiAgICAgIHllYXI6IHsKICAgICAgICByZXF1aXJlZAogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5mZXRjaE1ldGhvZHMoe30pOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygnbWV0aG9kJywgWydmZXRjaE1ldGhvZHMnXSksCiAgICAuLi5tYXBBY3Rpb25zKCdlc2VhQWNjb3VudCcsIFsnY3JlYXRlRXNlYUFjY291bnQnXSksCiAgICBhc3luYyBjcmVhdGVOZXdFc2VhTWV0aG9kKCkgewogICAgICBjb25zb2xlLmxvZygnVmFsaWRhdGluZyBuZXcgRXNlYSBBY2NvdW50Li4uJyk7CiAgICAgIHRoaXMudiQuZXNlYWFjY291bnRGb3JtLiR0b3VjaCgpOwogICAgICBpZiAodGhpcy52JC4kaW52YWxpZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVzZWFBY2NvdW50KHsKICAgICAgICBvSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5PcmdhbmlzYXRpb25JZCwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBtZXRob2Q6IHRoaXMuZXNlYWFjY291bnRGb3JtLm1ldGhvZC5pZCwKICAgICAgICAgIHllYXI6IHRoaXMuZXNlYWFjY291bnRGb3JtLnllYXIKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5lc2VhQWNjb3VudC5pZCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdvcmdhbmlzYXRpb25lc2VhYWNjb3VudCcsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgRXNlYUFjY291bnRJZDogdGhpcy5lc2VhQWNjb3VudC5pZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlZGlhbG9nJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["useVuelidate","required","Dropdown","mapActions","mapState","components","props","eseaAccounts","type","Array","data","eseaaccountForm","method","year","computed","filteredEseaAccounts","filter","eseaAccount","method_name","includes","name","possibleyears","currentyear","Date","getFullYear","minyear","years","i","push","setup","v$","validations","created","fetchMethods","methods","createNewEseaMethod","console","log","$touch","$invalid","createEseaAccount","oId","$route","params","OrganisationId","id","$router","EseaAccountId","closeDialog","$emit"],"sources":["C:\\Users\\Marc\\source\\repos\\openESEA\\openESEA_interpreter\\frontend\\src\\components\\forms\\EseaAccountForm.vue"],"sourcesContent":["// used by OrganisationEseaAccounts.vue\r\n\r\n<template>\r\n    <form id=\"eseaaccountform\" @submit.prevent=\"createNewEseaMethod\" class=\"p-input-filled p-fluid p-text-left\">\r\n        <div class=\"p-field\">\r\n            <label for=\"method\">Method<span style=\"color:red\">*</span></label>\r\n            <Dropdown id=\"method\" v-model=\"eseaaccountForm.method\" :options=\"methods\"  optionLabel=\"name\" placeholder=\"Select a Method\" :class=\"{'p-invalid': v$.eseaaccountForm.method.$error}\" />\r\n            <!-- <div class=\"p-error p-text-italic\" v-for=\"error in methodErrors\" :key=\"error\">{{error}}</div> -->\r\n        </div>\r\n\r\n        <div class=\"p-field p-m-0\">\r\n            <label for=\"year\">Year</label>\r\n            <Dropdown id=\"method\" v-model=\"eseaaccountForm.year\" :options=\"possibleyears\" placeholder=\"Select a Year\" :class=\"{'p-invalid': v$.eseaaccountForm.year.$error}\" />\r\n            <!-- <div class=\"p-error p-text-italic\" v-for=\"error in openingDateErrors\" :key=\"error\"><small>{{error}}</small></div> -->\r\n        </div>\r\n        <div v-if=\"filteredEseaAccounts.length\" class=\"p-error p-text-italic\">\"This organisation already has an Esea Account for this method and year.\"</div>\r\n\r\n        <div class=\"p-d-flex p-jc-between p-mt-5\">\r\n            <Button label=\"Cancel\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"closeDialog\" style=\"width: 100px\" />\r\n            <Button type=\"submit\" form=\"eseaaccountform\" label=\"Create\" icon=\"pi pi-check\" class=\"p-button-text\" :disabled=\"v$.eseaaccountForm.$error || filteredEseaAccounts.length\" style=\"width: 100px\" />\r\n        </div>\r\n    </form>\r\n</template>\r\n\r\n<script>\r\n    import useVuelidate from '@vuelidate/core'\r\n    import { required } from 'vuelidate/lib/validators'\r\n    import Dropdown from 'primevue/dropdown'\r\n    import { mapActions, mapState } from 'vuex'\r\n\r\n    export default {\r\n        components: {\r\n            Dropdown\r\n        },\r\n        props: {\r\n            eseaAccounts: {\r\n                type: Array\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                eseaaccountForm: {\r\n                    method: null,\r\n                    year: null\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState('method', ['methods']),\r\n            ...mapState('eseaAccount', ['eseaAccount']),\r\n            filteredEseaAccounts () {\r\n                return this.eseaAccounts.filter(eseaAccount => eseaAccount.year === this.eseaaccountForm.year && eseaAccount.method_name.includes(this.eseaaccountForm.method.name)) // .filter(eseaAccount => { return eseaAccount.year.includes(2020) })\r\n            },\r\n            possibleyears () {\r\n                const currentyear = new Date().getFullYear()\r\n                const minyear = currentyear - 10\r\n                const years = []\r\n\r\n                for (let i = minyear; i <= currentyear; i++) {\r\n                    years.push(i)\r\n                }\r\n                return years\r\n            }\r\n        },\r\n        setup: () => ({ v$: useVuelidate() }),\r\n        validations: {\r\n            eseaaccountForm: {\r\n                method: { required },\r\n                year: { required }\r\n            }\r\n        },\r\n        async created () {\r\n            await this.fetchMethods({})\r\n        },\r\n        methods: {\r\n            ...mapActions('method', ['fetchMethods']),\r\n            ...mapActions('eseaAccount', ['createEseaAccount']),\r\n            async createNewEseaMethod () {\r\n                console.log('Validating new Esea Account...')\r\n                this.v$.eseaaccountForm.$touch()\r\n                if (this.v$.$invalid) { return }\r\n                await this.createEseaAccount({ oId: this.$route.params.OrganisationId, data: { method: this.eseaaccountForm.method.id, year: this.eseaaccountForm.year } })\r\n\r\n                if (this.eseaAccount.id) {\r\n                    this.$router.push({ name: 'organisationeseaaccount', params: { EseaAccountId: this.eseaAccount.id } })\r\n                }\r\n            },\r\n            closeDialog () {\r\n                this.$emit('closedialog')\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n/<!-- <Calendar id=\"year\" v-model=\"eseaaccountForm.year\" placeholder=\"Year\" appendTo=\"body\" :showIcon=\"true\" view=\"year\" dateFormat=\"yy\"  yearRange=\"2000:2030\" />\r\n// <InputNumber id=\"integeronly\" v-model=\"eseaaccountForm.year\" :min=\"2000\" :max=\"2050\" /> -->\r\n"],"mappings":"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","ignoreList":[]}]}